$("#task_<%= @task.id %>").replaceWith($("<%= j render @task %>"));

<% Task::SCOPES.each do |show, _| %>
  <% count = current_user.tasks.send(show).count %>
  $('#counter-by-due-at_<%= show %>').text("<%= count %>");
  <% if show == 'delayed' %>
      <% if count > 0 %>
      $('#counter-by-due-at_<%= show %>').addClass('label-danger').removeClass('label-info').closest('.list-group-item').addClass('list-group-item-danger');
    <% else %>
      $('#counter-by-due-at_<%= show %>').addClass('label-info').removeClass('label-danger').closest('.list-group-item').removeClass('list-group-item-danger');
    <% end %>
  <% end %>
<% end %>
<% current_user.category_names.each do |category_name| %>
  $('#counter-by-category_<%= category_name.parameterize %>').text("<%= current_user.tasks.where(category_name: category_name).todo.count %>");
<% end %>
$('#counter-by-category_uncategorized').text("<%= current_user.tasks.where(category_name: [nil, '']).todo.count %>");
$('#counter-by-category_all').text("<%= current_user.tasks.todo.count %>");
