- if user_signed_in?
  %p.hidden-md.hidden-lg
    = link_to icon_and_text("plus", "New task"), new_task_path, class: "btn btn-block btn-success navbar-btn"

  %h2 Filter

  .panel.panel-default
    .panel-heading By due at
    .list-group
      - Task::SCOPES.each do |show, text|
        - count = current_user.tasks.send(show).count
        = link_to tasks_path(category_name: 'all', show: show), class: "list-group-item #{'list-group-item-danger' if show == 'delayed' && count > 0} #{'active' if @category_name == 'all' && @show == show}" do
          = text
          %span#counter-by-due-at.label{id: show, class: "#{show == 'delayed' && count > 0 ? 'label-danger' : 'label-info'}"}= count

  .panel.panel-default
    .panel-heading By category
    .list-group
      - current_user.category_names.each do |category_name|
        = link_to tasks_path(category_name: category_name, show: 'todo'), class: "list-group-item #{'active' if @category_name == category_name && @show == 'todo'}" do
          = category_name
          %span#counter-by-category.label.label-info{id: category_name.parameterize}= current_user.tasks.where(category_name: category_name).todo.count
      = link_to tasks_path(category_name: 'uncategorized', show: 'todo'), class: "list-group-item #{'active' if @category_name == 'uncategorized' && @show == 'todo'}" do
        = "Uncategorized"
        %span#counter-by-category.label.label-info{id: 'uncategorized'}= current_user.tasks.where(category_name: [nil, '']).todo.count
      = link_to tasks_path(category_name: 'all', show: 'todo'), class: "list-group-item #{'active' if @category_name == 'all' && @show == 'todo'}" do
        = "All categories"
        %span#counter-by-category.label.label-info{id: 'all'}= current_user.tasks.todo.count
      = link_to icon_and_text('cog', "Manage categories"), categories_path, class: "list-group-item #{'active' if controller_name == 'categories'}"

  %h2 User

  .list-group
    = link_to icon_and_text('user', "My Profile"), edit_user_registration_path, class: 'list-group-item'
    = link_to icon_and_text('sign-out', "Logout"), destroy_user_session_path, method: :delete, class: 'list-group-item'
